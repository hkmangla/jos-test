!function(e){var n={};function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=n,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)i.d(t,o,function(n){return e[n]}.bind(null,o));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="/dist/",i(i.s=0)}([function(e,n,i){if(window.hyper_core_version="2.0rc_4",JBridge&&JBridge.setInSharedPrefs&&JBridge.getResourceByName)try{"true"!=JBridge.getResourceByName("block_failed_hash")&&JBridge.setInSharedPrefs("jp_asset_manage","false")}catch(e){JBridge.setInSharedPrefs("jp_asset_manage","false")}console.log("apple pie"),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=arguments[1],o=0;o<i;){var r=n[o];if(e.call(t,r,o,n))return o;o++}return-1},configurable:!0,writable:!0}),window._jbridge=JBridge;var t=i(1);try{window.getTrackerModule&&window.getTrackerModule.Main&&window.getTrackerModule.Main.initTracker&&(window.Analytics=window.getTrackerModule.Main.initTracker("os")),window.Analytics.trackMicroAppVerison(window.hyper_core_version)()}catch(e){console.log("Tracker eval failed at ",e)}var o={hasInitiated:!1,rootServices:[]};window.onMerchantEvent=function(e,n,i){if("initiate"==e){var r=JSON.parse(n);if(o.hasInitiated)if(o.rootServices.indexOf(r.service)){c=t.getDependantMicroAppChain(n,r.service);for(var d=[],a=0;a<c.length;++a)-1==o.rootServices.indexOf(c[a])&&d.push(c[a]);o.rootServices=o.rootServices.concat(d)}else window.mapps&&window.mapps[r.service]&&window.mapps[r.service].contentWindow&&"function"==typeof window.mapps[r.service].contentWindow.onMerchantEvent?window.mapps[r.service].contentWindow.onMerchantEvent(e,n):(window.cachedResult=window.cachedResult||{},window.cachedResult[r.payload]=window.cachedResult[r.payload]||[],window.cachedResult[r.payload].push({event:e,data:n,callback:i}));else{o.hasInitiated=!0,t.main(e,n);var c=t.getDependantMicroAppChain(n,r.service);o.rootServices=o.rootServices.concat(c)}window.__payload=r}else if("respawn"==e);else if("prefetch"==e)window.__payload=JSON.parse(n);else if("InitTracker"==e)window.getTrackerModule&&window.getTrackerModule.Main&&window.getTrackerModule.Main.initTracker&&(window.Analytics=window.getTrackerModule.Main.initTracker("hyperos"));else{var s=window.eventListeners.onMerchantEvent||[];try{var w=JSON.parse(n);if(w.service)if(-1!=(c=t.getDependantMicroAppChain(n,w.service)).indexOf(w.service)){if(-1!=s.indexOf(w.service))return window.mapps[w.service].contentWindow.onMerchantEvent.apply(void 0,arguments);window.cachedResult=window.cachedResult||{},window.cachedResult[w.payload]=window.cachedResult[w.payload]||[],window.cachedResult[w.payload].push({event:e,data:n,callback:i})}else JBridge.runInJuspayBrowser("onEvent",JSON.stringify({event:e+"_result",requestId:w.requestId,service:w.service,payload:{},error:!0,errorMessage:w.service+" not yet initiated",errorCode:"JP_OS_001"}),"");else JBridge.runInJuspayBrowser("onEvent",JSON.stringify({event:e+"_result",requestId:w.requestId,service:"",payload:{},error:!0,errorMessage:"Service  not passed",errorCode:"JP_OS_003"}),"")}catch(i){JBridge.runInJuspayBrowser("onEvent",JSON.stringify({requestId:"",service:"",payload:{error:i,payload:n},error:!0,errorMessage:e+": incorrect payload",errorCode:"JP_OS_002"}),""),console.log("Todo add asset fallback logic")}}},window.onBackPressed=function(){if(window.mappStack.length>0&&void 0!==window.mapps){var e=window.mappStack[window.mappStack.length-1],n=window.mapps[e.callee];n&&n.contentWindow&&"function"==typeof n.contentWindow.onBackPressed&&n.contentWindow.onBackPressed()}else _jbridge.exitApp(0,JSON.stringify({backPressed:"true"}))},window.onLifeCycleEvent=function(e){if(window.mappStack.length>0&&void 0!==window.mapps){var n=window.mappStack[window.mappStack.length-1],i=window.mapps[n.callee];i&&i.contentWindow&&"function"==typeof i.contentWindow.onLifeCycleEvent&&i.contentWindow.onLifeCycleEvent(e)}else _jbridge.exitApp(0,JSON.stringify({backPressed:"true"}))},window.callUICallback=function(){try{var e=arguments[0]||"";if(void 0!==window.mapps&&"string"==typeof e){var n=e.split("_");if(n.length>1){var i=n[0],t=window.mapps[i];if(t&&t.contentWindow&&"function"==typeof t.contentWindow.callUICallback)return void t.contentWindow.callUICallback.apply(null,arguments)}}if(window.__BOOT_LOADER[e]){var o=[],r=1;for(var d in arguments)arguments[r]&&o.push(arguments[r]),r++;window.__BOOT_LOADER[e].apply(null,o)}}catch(e){console.error(e)}},window.onBundleUpdate=function(){var e=JSON.parse(_jbridge.getSessionAttribute("bundleParams","{}"));for(var n in window.mapps){var i=window.mapps[n];if(i&&i.contentWindow){for(var t in e)"service"!=t&&(i.contentWindow.__payload[t]=e[t]);"function"==typeof i.contentWindow.onBundleUpdate&&i.contentWindow.onBundleUpdate()}}},JBridge.runInJuspayBrowser("onEvent",JSON.stringify({event:"onJOSReady"}),"")},function(e,n,i){var t=i(2);function o(e){return function(n){return function(i){return function(t){return function(o){return function(){var r=(window.mapps[e]||{}).contentWindow;if("java"===n&&r&&r.__PROXY_FN&&null!=r.__FN_INDEX){var d=++r.__FN_INDEX+"";if(r.__PROXY_FN["F"+d]=function(e){"function"==typeof o&&o(e)},"DUI_READY"==JSON.parse(t).action){var a=window.mapps[e].contentWindow.__payload;if("java"==r.JOS.parent&&_jbridge.runInJuspayBrowser("onEvent",t,"F"+d),window.mapps[e].contentWindow.onMerchantEvent("initiate",JSON.stringify(a)),window.cachedResult&&window.cachedResult[e]&&window.cachedResult[e].length)for(var c=0;c<window.cachedResult[e].length;c++)window.eventListeners&&window.eventListeners[window.cachedResult[e][c].event]&&-1!=window.eventListeners[window.cachedResult[e][c].event].indexOf(e)&&r[window.cachedResult[e][c].event]&&(window.cachedResult[e][c].data&&Array.isArray(window.cachedResult[e][c].data)?(window.cachedResult[e][c].data.push(window.cachedResult[e][c].callback),r[window.cachedResult[e][c].event].apply(null,window.cachedResult[e][c].data)):r[window.cachedResult[e][c].event](window.cachedResult[e][c].data,window.cachedResult[e][c].callback))}else _jbridge.runInJuspayBrowser("onEvent",t,"F"+d)}else{var s=(window.mapps[n]||{}).contentWindow;if(s&&"function"==typeof s[i]&&!Array.isArray(t))return s[i](t,o);if(s&&"function"==typeof s[i]&&Array.isArray(t))return t.push(o),s[i].apply(null,t);window.cachedResult=window.cachedResult||{},window.cachedResult[n]=window.cachedResult[n]||[],window.cachedResult[n].push({event:i,data:t,callback:o})}}}}}}}function r(e){return{finish:v(e),startApp:f(e.callee),addEventListener:(n=e.callee,function(e){return function(){var i=window.JOSHolder[n];window.eventListeners[e]=window.eventListeners[e]||[],-1==window.eventListeners[e].indexOf(n)&&window.eventListeners[e].push(n),i.eventListeners=i.eventListeners||[],i.eventListeners.push(e),"function"!=typeof window[e]&&(window[e]=function(){var n=window.eventListeners[e]||[],i=window.mappSequence||[];if(arguments[1])try{var t=JSON.parse(arguments[1]);if(t.service&&-1!=n.indexOf(t.service))return window.mapps[t.service].contentWindow[e].apply(void 0,arguments)}catch(e){console.log("Todo add asset fallback logic")}for(var o=i.length-1;o>=0;o--){var r=i[o];if(window.mapps[r]&&-1!=n.indexOf(r)){console.log("window.mapps["+r+"].contentWindow["+e+"](..."+JSON.stringify(arguments)+");");var d=window.mapps[r].contentWindow[e].apply(void 0,arguments);if("boolean"==typeof d&&d)break}}})}}),emitEvent:o(e.callee),parent:e.caller,self:e.callee,eventListeners:[],isMAppPresent:t.isMAppPresent};var n}var d=function(e,n){var i=window.getConfig(e);return i&&i.apps&&i.apps[n]&&i.apps[n].canOpen&&Array.isArray(i.apps[n].canOpen)?i.apps[n].canOpen:[]},a=function e(n,i){var t=i.reduce((function(e,i){return e.concat(d(n,i))}),[]);return new Set(t.concat(i)).size===new Set(i).size?i:i.concat(e(n,t))},c=function(e,n,i,o){var r=t.readIfExist(i,n);t.createIframe(n,r,i)},s=function(e,n,i,o){var d=r({caller:e,callee:n,callback:o,eventListeners:[],ipcChannels:[]});t.injectIframe(n,i,d)},w=function(e,n,i,o){t.registerOS(n),t.setValueFromAppWindow(n,"canPostLogs",!1),t.addToMAppSequence(n),d(i,n).forEach((function(e){!function(e,n,i,o){if(!t.isMAppPresent(o)&&-1===o.indexOf("placeholder")){var d=r({caller:e,callee:e,callback:i,eventListeners:[],ipcChannels:[]}),a=Object.assign({},n,{service:o,service_based:!0});d.startApp(o,a,(function(){}))}}(n,i,o,e)}))},l=function(e,n,i){t.unregisterAllIPC(e.callee)},p=function(e,n,i){t.removeView(e.callee),t.removeIframe(e.callee)},u=function(e,n,i){t.unregister(e),e.callback(n)(i)()},f=function(e){return function(n,i,t){c(e,n,i,t),s(e,n,i,t),w(e,n,i,t)}},v=function(e){return function(n){return function(i){return function(){l(e,n,i),p(e,n,i),u(e,n,i)}}}};e.exports={getDependantMicroAppChain:function(e,n){var i=t.bootComplete(e);return a(i,[n])},main:function(e,n){!function(e){"null"!==e.service&&(t.mergeJBridge(),f("java")(e.service,e,t.shutDown("initiate")(e)))}(t.bootComplete(n))}}},function(e,n){function i(){var e=navigator.userAgent,n="WEB";return-1!=e.indexOf("Android")&&-1!=e.indexOf("Version")?n="ANDROID":-1==e.indexOf("iPhone")&&-1==e.indexOf("iPad")&&-1==e.indexOf("Macintosh")||-1!=e.indexOf("Version")||(n="IOS"),"string"==typeof window.__OS?window.__OS:n}window.mappStack=[],window.mappCount={},window.ipcChannels={},window.eventListeners={},window.__PRESTO_ID=1,window.mappSequence=[],window.urlList={},n.mergeJBridge=function(){try{if(Object.keys(_jbridge).length>0)for(var e in JBridge={},_jbridge)"setSessionId"!=e?JBridge[e]=window._jbridge[e].bind(window._jbridge):(JBridge.setSessionId=function(e){console.log("Session Id is set in native")},window._jbridge&&window._jbridge.trackEvent||(JBridge.trackEvent=function(e,n){console.log("This method is deprecated")}));if("undefined"!=typeof MerchantJBridge&&Object.keys(MerchantJBridge).length>0)for(var e in window._merchantJbridge=MerchantJBridge,_merchantJbridge)JBridge[e]=window._merchantJbridge[e].bind(window._merchantJbridge);JBridge.getSessionId=function(){return window.latestSessionId||"null"}}catch(e){console.error(e)}},n.bootComplete=function(e){var n=JSON.parse(e);return void 0===n.service&&(n.service="null"),void 0===n.services&&(n.services=[],n.services.push(n.service)),void 0===n.pre_fetch&&(n.pre_fetch="false"),void 0===n.service_based&&(n.service_based=!1),void 0===n.betaAssets&&(n.betaAssets=!1),n},n.shutDown=function(e){return function(n){return function(i){return function(t){return function(){var o={event:e+"_result",requestId:n.requestId?n.requestId:"",service:n.service?n.service:"in.juspay.hyperos",payload:0==i?{}:{payload:t},error:0==i,errorCode:0==i?"JP_OS_004":"",errorMessage:0==i?t:""};JBridge.runInJuspayBrowser("onEvent",JSON.stringify(o),null)}}}}},n.createIframe=function(e,n,i){var t=document.createElement("iframe");if(t.id=e,n.includes("<html>")){var o=function(e,n){var i=window.getConfig(e).apps||{};if(void 0!==i[n])return i[n].scripts||[];return[]}(i,e);if(o.length){var r=o.reduce((function(e,n){return e+"<script src = '"+n+"'><\/script>"}),"");r=r.slice(0,-9),n=n.replace("<script>",r)}t.srcdoc=n}else t.src=n;void 0===window.mapps&&(window.mapps={}),window.mapps[e]=t},n.isMAppPresent=function(e){return!!window.mapps[e]},n.unregister=function(e){void 0!==window.mapps[e.callee]&&delete window.mapps[e.callee]},n.unregisterAllIPC=function(e){},n.injectIframe=function(e,n,t){if(void 0===window.mapps||void 0===window.mapps[e])return"__failed";"undefined"!=typeof window&&(n.global_session_id="string"==typeof window.hyper_session_id?window.hyper_session_id:"na",n.parent_session_id=void 0===window.latestSessionId?window.hyper_session_id:window.latestSessionId);var o=window.mapps[e];if(window.JOSHolder=window.JOSHolder||{},window.JOSHolder[e]=t,window.getTrackerModule&&window.getTrackerModule.Main&&window.getTrackerModule.Main.initTracker){var r=e.split(".");window.JOSHolder[e].tracker=window.getTrackerModule.Main.initTracker(r[r.length-1])}return document.body.appendChild(o),o.contentWindow.__payload=n,o.contentWindow.__OS=i(),o.contentWindow.JOS=window.JOSHolder[e],o.contentWindow.prestoUI=window.prestoUI,o.contentWindow.setInitialHeight=window.setInitialHeight,"__success"};n.readIfExist=function(e,n){var i=function(e,n){var i=window.getConfig(e).apps||{};return void 0!==i[n]&&i[n].root+i[n].entry||""}(e,n);return _jbridge.loadFileInDUI(i)},n.removeView=function(e){if(void 0!==window.mapps[e]){var n,t=window.mapps[e];t.contentWindow.N?(n=t.contentWindow.N.children[0].__ref.__id,isNaN(parseInt(n))||(Android.runInUI("set_VIEW=ctx->findViewById:i_"+n+";get_VIEW->removeAllViews;",null),Android.runInUI("set_VIEW=ctx->findViewById:i_"+n+";set_PARENT=get_VIEW->getParent;get_PARENT->removeView:get_VIEW;",null)),n=t.contentWindow.N.__ref.__id):(n=(t.contentWindow.__ROOTSCREEN||{idSet:{root:"null"}}).idSet.root,isNaN(parseInt(n))||("WEB"===i()?Android.removeView(parseInt(n)):(Android.runInUI("set_VIEW=ctx->findViewById:i_"+n+";get_VIEW->removeAllViews;",null),Android.runInUI("set_VIEW=ctx->findViewById:i_"+n+";set_PARENT=get_VIEW->getParent;get_PARENT->removeView:get_VIEW;",null))),n=(t.contentWindow.__ROOTSCREEN||{layout:{idSet:{id:"null"}}}).layout.idSet.id),"null"!=n?("WEB"===i()?Android.removeView(parseInt(n)):(Android.runInUI("set_VIEW=ctx->findViewById:i_"+n+";get_VIEW->removeAllViews;",null),Android.runInUI("set_VIEW=ctx->findViewById:i_"+n+";set_PARENT=get_VIEW->getParent;get_PARENT->removeView:get_VIEW;",null)),console.log("View Removed")):console.error("Error: ROOTSCREEN can't be found")}},n.registerOS=function(e){if(window.mapps[e]){var n=window.mapps[e];n.contentWindow.JBridge=window.JBridge,window.Android&&(n.contentWindow.Android=window.Android)}},n.setValueFromAppWindow=function(e,n,i){"undefined"!=typeof window&&void 0!==window.mapps&&void 0!==window.mapps[e]&&(window.mapps[e].contentWindow[n]=i)},n.addToMAppSequence=function(e){window.mappSequence||(window.mappSequence=[]),"function"==typeof window.mappSequence.push&&-1==window.mappSequence.indexOf(e)&&window.mappSequence.push(e)},n.removeIframe=function(e){void 0!==window.mapps[e]&&document.body.removeChild(window.mapps[e])}}]);